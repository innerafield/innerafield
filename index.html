<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="Breathe. Connect. Remember you are infinite.">
    <title>Innera Field</title>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@200;300;400;500;600&display=swap" rel="stylesheet">
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        :root {
            --bg: #000;
            --text: #fff;
            --text-dim: rgba(255, 255, 255, 0.7);
            --border: rgba(255, 255, 255, 0.15);
            --glow-pink: rgba(255, 20, 147, 0.4);
            --glow-blue: rgba(0, 191, 255, 0.4);
            --glow-purple: rgba(138, 43, 226, 0.3);
        }

        body.light {
            --bg: #fafafa;
            --text: #1a1a1a;
            --text-dim: rgba(0, 0, 0, 0.7);
            --border: rgba(0, 0, 0, 0.15);
        }

        body {
            font-family: 'Inter', sans-serif;
            background: var(--bg);
            color: var(--text);
            min-height: 100vh;
            overflow-x: hidden;
            transition: all 0.5s ease;
            padding-bottom: 150px;
        }

        /* COSMOS BACKGROUND */
        #cosmos {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            z-index: 0;
        }

        .cosmos-glow {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            z-index: 1;
            background: radial-gradient(ellipse at top, var(--glow-pink), transparent 60%),
                        radial-gradient(ellipse at bottom, var(--glow-blue), transparent 60%);
            opacity: 0.3;
            animation: pulse 8s ease-in-out infinite;
            pointer-events: none;
        }

        @keyframes pulse {
            0%, 100% { opacity: 0.3; }
            50% { opacity: 0.6; }
        }

        .container {
            position: relative;
            z-index: 2;
            max-width: 1200px;
            margin: 0 auto;
            padding: 2rem;
            text-align: center;
            display: flex;
            flex-direction: column;
            align-items: center;
        }

        /* HEADER */
        h1 {
            font-size: clamp(2.5rem, 6vw, 5rem);
            font-weight: 600;
            letter-spacing: 0.5em;
            margin: 2rem 0 1rem 0;
            background: linear-gradient(135deg, #ff1493, #00bfff, #8a2be2);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
            text-shadow: 0 0 40px var(--glow-pink);
            animation: fadeIn 1.5s ease;
            text-align: center;
            width: 100%;
        }

        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(20px); }
            to { opacity: 1; transform: translateY(0); }
        }

        /* WISDOM - BACK AND VISIBLE */
        .wisdom {
            font-size: clamp(1.1rem, 2.5vw, 1.6rem);
            font-weight: 300;
            line-height: 2;
            color: var(--text-dim);
            max-width: 700px;
            margin: 2rem auto 3rem auto;
            padding: 2rem;
            background: rgba(255, 255, 255, 0.03);
            border: 1px solid var(--border);
            border-radius: 20px;
            backdrop-filter: blur(15px);
            opacity: 0;
            animation: fadeIn 2s ease 0.5s forwards;
            text-align: center;
        }

        /* BREATH CIRCLE */
        .breath-zone {
            margin: 3rem auto;
            position: relative;
            width: 100%;
            display: flex;
            flex-direction: column;
            align-items: center;
        }

        .circle {
            width: 240px;
            height: 240px;
            border: 3px solid var(--border);
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            cursor: pointer;
            box-shadow: 0 0 60px var(--glow-pink), 
                        inset 0 0 60px var(--glow-purple);
            backdrop-filter: blur(20px);
            background: rgba(255, 255, 255, 0.02);
            opacity: 0;
            animation: fadeIn 2s ease 1s forwards;
            transition: transform 4s cubic-bezier(0.4, 0, 0.2, 1), 
                        opacity 4s cubic-bezier(0.4, 0, 0.2, 1),
                        box-shadow 4s cubic-bezier(0.4, 0, 0.2, 1);
        }

        .circle:hover {
            transform: scale(1.05);
        }

        /* SMOOTH BREATHING ANIMATIONS */
        .circle.breathe-in {
            transform: scale(1.4);
            opacity: 1;
            box-shadow: 0 0 100px var(--glow-pink), inset 0 0 80px var(--glow-purple);
        }

        .circle.hold-in {
            transform: scale(1.4);
            opacity: 1;
            box-shadow: 0 0 100px var(--glow-pink), inset 0 0 80px var(--glow-purple);
        }

        .circle.breathe-out {
            transform: scale(0.85);
            opacity: 0.5;
            box-shadow: 0 0 40px var(--glow-pink), inset 0 0 40px var(--glow-purple);
        }

        .circle.hold-out {
            transform: scale(0.85);
            opacity: 0.5;
            box-shadow: 0 0 40px var(--glow-pink), inset 0 0 40px var(--glow-purple);
        }

        .circle-text {
            font-size: 1.3rem;
            font-weight: 300;
            letter-spacing: 0.3em;
            opacity: 0.8;
        }

        /* TIMER - FIXED AND VISIBLE */
        .timer {
            margin-top: 2rem;
            font-size: 3rem;
            font-weight: 300;
            font-variant-numeric: tabular-nums;
            color: var(--text);
            text-align: center;
            opacity: 0;
            transition: opacity 0.5s;
        }

        .timer.active {
            opacity: 1;
        }

        /* FREQUENCIES */
        .frequencies {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(160px, 1fr));
            gap: 1.5rem;
            margin: 4rem auto;
            max-width: 900px;
            width: 100%;
            opacity: 0;
            animation: fadeIn 2s ease 2s forwards;
        }

        .freq-card {
            background: rgba(255, 255, 255, 0.03);
            border: 1px solid var(--border);
            border-radius: 20px;
            padding: 2rem 1rem;
            cursor: pointer;
            transition: all 0.4s ease;
            backdrop-filter: blur(15px);
        }

        .freq-card:hover {
            background: rgba(255, 255, 255, 0.08);
            transform: translateY(-5px);
            box-shadow: 0 10px 40px var(--glow-purple);
            border-color: var(--glow-pink);
        }

        .freq-card.active {
            background: rgba(255, 20, 147, 0.15);
            border-color: var(--glow-pink);
            box-shadow: 0 0 30px var(--glow-pink);
        }

        .freq-card h3 {
            font-size: 1.3rem;
            font-weight: 500;
            letter-spacing: 0.05em;
        }

        /* FIXED CONTROLS AT BOTTOM - MORE TRANSPARENT */
        .fixed-controls {
            position: fixed;
            bottom: 0;
            left: 0;
            right: 0;
            z-index: 100;
            background: rgba(0, 0, 0, 0.8);
            backdrop-filter: blur(30px);
            border-top: 1px solid var(--border);
            padding: 1.5rem;
            display: flex;
            flex-direction: column;
            align-items: center;
            gap: 1rem;
        }

        body.light .fixed-controls {
            background: rgba(255, 255, 255, 0.8);
        }

        /* PEACE NOW - BIG CENTRAL BUTTON */
        .peace-now {
            padding: 1.2rem 4rem;
            font-size: 1.3rem;
            background: linear-gradient(135deg, var(--glow-pink), var(--glow-blue));
            border: none;
            border-radius: 60px;
            color: white;
            cursor: pointer;
            font-weight: 500;
            letter-spacing: 0.1em;
            transition: all 0.3s;
            box-shadow: 0 10px 40px var(--glow-pink);
            font-family: 'Inter', sans-serif;
        }

        .peace-now:hover {
            transform: translateY(-3px);
            box-shadow: 0 15px 60px var(--glow-pink);
        }

        .peace-now:active {
            transform: translateY(0);
        }

        /* OTHER CONTROLS */
        .controls {
            display: flex;
            gap: 1rem;
            justify-content: center;
            flex-wrap: wrap;
        }

        .btn {
            background: rgba(255, 255, 255, 0.08);
            border: 1px solid var(--border);
            color: var(--text);
            padding: 0.9rem 1.8rem;
            border-radius: 40px;
            cursor: pointer;
            font-size: 0.95rem;
            font-weight: 500;
            letter-spacing: 0.05em;
            transition: all 0.3s;
            backdrop-filter: blur(15px);
            font-family: 'Inter', sans-serif;
        }

        .btn:hover {
            background: rgba(255, 20, 147, 0.2);
            border-color: var(--glow-pink);
            transform: translateY(-2px);
            box-shadow: 0 5px 20px var(--glow-pink);
        }

        .btn.active {
            background: rgba(255, 20, 147, 0.3);
            border-color: var(--glow-pink);
        }

        /* ACCESSIBILITY BAR - SIMPLIFIED */
        .access-bar {
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            padding: 0.8rem;
            background: rgba(0, 0, 0, 0.8);
            backdrop-filter: blur(30px);
            display: flex;
            gap: 0.8rem;
            justify-content: center;
            flex-wrap: wrap;
            z-index: 100;
            border-bottom: 1px solid var(--border);
        }

        body.light .access-bar {
            background: rgba(255, 255, 255, 0.8);
        }

        .access-bar .btn {
            padding: 0.5rem 1rem;
            font-size: 0.85rem;
        }

        /* MODAL */
        .modal {
            position: fixed;
            inset: 0;
            background: rgba(0, 0, 0, 0.95);
            backdrop-filter: blur(10px);
            z-index: 200;
            display: none;
            align-items: center;
            justify-content: center;
            padding: 2rem;
        }

        .modal.show {
            display: flex;
        }

        .modal-box {
            background: rgba(20, 20, 40, 0.95);
            border: 2px solid var(--glow-pink);
            border-radius: 25px;
            padding: 3rem;
            max-width: 500px;
            width: 100%;
            position: relative;
            box-shadow: 0 0 60px var(--glow-pink);
            animation: slideUp 0.4s ease;
        }

        @keyframes slideUp {
            from { opacity: 0; transform: translateY(30px); }
            to { opacity: 1; transform: translateY(0); }
        }

        .modal-box h2 {
            color: white;
            font-size: 2rem;
            font-weight: 500;
            margin-bottom: 1.5rem;
            letter-spacing: 0.05em;
        }

        .modal-box p {
            color: rgba(255, 255, 255, 0.8);
            line-height: 1.8;
            margin-bottom: 1rem;
        }

        .close-x {
            position: absolute;
            top: 1.5rem;
            right: 1.5rem;
            background: none;
            border: none;
            color: white;
            font-size: 2rem;
            cursor: pointer;
            opacity: 0.6;
            transition: opacity 0.3s;
            padding: 0;
            width: auto;
        }

        .close-x:hover {
            opacity: 1;
        }

        textarea {
            width: 100%;
            min-height: 120px;
            background: rgba(0, 0, 0, 0.5);
            border: 1px solid var(--border);
            border-radius: 15px;
            padding: 1rem;
            color: white;
            font-family: 'Inter', sans-serif;
            font-size: 1rem;
            resize: vertical;
        }

        textarea:focus {
            outline: none;
            border-color: var(--glow-pink);
            box-shadow: 0 0 20px var(--glow-pink);
        }

        /* DONATION - MORE TRANSPARENT */
        .donate {
            margin: 4rem auto;
            padding: 2.5rem;
            max-width: 600px;
            background: rgba(255, 255, 255, 0.03);
            border: 1px solid var(--border);
            border-radius: 25px;
            backdrop-filter: blur(20px);
            opacity: 0;
            animation: fadeIn 2s ease 3s forwards;
        }

        .donate h3 {
            font-size: 1.5rem;
            font-weight: 500;
            margin-bottom: 1rem;
            letter-spacing: 0.1em;
        }

        .donate p {
            color: var(--text-dim);
            line-height: 1.8;
            margin-bottom: 1.5rem;
        }

        .donate-btn {
            background: linear-gradient(135deg, var(--glow-blue), var(--glow-purple));
            border: none;
            padding: 1rem 3rem;
            border-radius: 40px;
            color: white;
            font-weight: 500;
            cursor: pointer;
            font-size: 1rem;
            letter-spacing: 0.05em;
            transition: all 0.3s;
            font-family: 'Inter', sans-serif;
        }

        .donate-btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 10px 40px var(--glow-blue);
        }

        /* MOBILE */
        @media (max-width: 768px) {
            h1 {
                letter-spacing: 0.3em;
            }

            .circle {
                width: 200px;
                height: 200px;
            }

            .timer {
                font-size: 2.5rem;
            }

            .frequencies {
                grid-template-columns: 1fr;
                max-width: 300px;
            }

            .peace-now {
                padding: 1rem 2.5rem;
                font-size: 1.1rem;
            }

            .fixed-controls {
                padding: 1rem;
            }

            body {
                padding-bottom: 180px;
            }
        }

        .sr-only {
            position: absolute;
            width: 1px;
            height: 1px;
            padding: 0;
            margin: -1px;
            overflow: hidden;
            clip: rect(0,0,0,0);
            border: 0;
        }

        #shareCanvas {
            display: none;
        }

        .share-preview {
            margin: 1rem 0;
        }

        .share-preview img {
            max-width: 100%;
            border-radius: 15px;
            box-shadow: 0 0 40px var(--glow-pink);
        }
    </style>
</head>
<body>
    <div class="cosmos-glow"></div>
    <canvas id="cosmos"></canvas>

    <!-- Accessibility Bar - SIMPLIFIED -->
    <nav class="access-bar" role="navigation">
        <button class="btn" id="themeBtn">‚òÄÔ∏è Light</button>
        <button class="btn" id="textBtn">A+ Text</button>
    </nav>

    <main class="container">
        <!-- Brand -->
        <h1>INNERA FIELD</h1>

        <!-- Wisdom - BACK AND VISIBLE -->
        <div class="wisdom" role="region" aria-label="Daily wisdom">
            <p id="wisdom">Loading wisdom...</p>
        </div>

        <!-- Breath Circle -->
        <div class="breath-zone">
            <div class="circle" id="circle" role="button" tabindex="0" aria-label="Breathing guide - click to start 4-4-4-4 breathing">
                <span class="circle-text" id="circleText">BREATHE</span>
            </div>
            <div class="timer" id="timer">00:00</div>
        </div>

        <!-- Frequencies -->
        <div class="frequencies" role="list" aria-label="Frequency selection">
            <div class="freq-card" data-freq="528" role="button" tabindex="0">
                <h3>Healing</h3>
            </div>
            <div class="freq-card" data-freq="432" role="button" tabindex="0">
                <h3>Peace</h3>
            </div>
            <div class="freq-card" data-freq="396" role="button" tabindex="0">
                <h3>Liberation</h3>
            </div>
            <div class="freq-card" data-freq="639" role="button" tabindex="0">
                <h3>Connection</h3>
            </div>
            <div class="freq-card" data-freq="963" role="button" tabindex="0">
                <h3>Awakening</h3>
            </div>
            <div class="freq-card" data-freq="0" role="button" tabindex="0">
                <h3>Silence</h3>
            </div>
        </div>

        <!-- Donation -->
        <div class="donate">
            <h3>‚ú® Energy Exchange</h3>
            <p>Innera Field is free forever, for all beings. If this portal has served you, consider passing it forward.</p>
            <button class="donate-btn" onclick="window.open('https://ko-fi.com/innerafield', '_blank')">
                Support on Ko-fi ‚òï
            </button>
        </div>
    </main>

    <!-- FIXED CONTROLS AT BOTTOM -->
    <div class="fixed-controls">
        <button class="peace-now" id="peace">üïäÔ∏è Peace Now</button>
        <div class="controls">
            <button class="btn" id="intentionBtn">üí´ Intention</button>
            <button class="btn" id="shareBtn">üì∏ Share</button>
            <button class="btn" id="stopBtn">‚èπÔ∏è Stop</button>
        </div>
    </div>

    <!-- Intention Modal -->
    <div class="modal" id="intentionModal">
        <div class="modal-box">
            <button class="close-x" onclick="closeModal('intentionModal')">√ó</button>
            <h2>Set Your Intention</h2>
            <p>What do you wish to call into being?</p>
            <textarea id="intentionText" placeholder="I intend to..."></textarea>
            <button class="btn" style="width: 100%; margin-top: 1.5rem;" id="releaseBtn">Release to Source ‚ú®</button>
        </div>
    </div>

    <!-- Share Modal -->
    <div class="modal" id="shareModal">
        <div class="modal-box">
            <button class="close-x" onclick="closeModal('shareModal')">√ó</button>
            <h2>Share Your Moment</h2>
            <canvas id="shareCanvas" width="1200" height="630"></canvas>
            <div class="share-preview" id="preview"></div>
            <button class="btn" style="width: 100%; margin-top: 1rem;" id="downloadBtn">Download Image üíæ</button>
        </div>
    </div>

    <script>
        // === DAILY WISDOM - BACK ===
        const wisdomMessages = [
            "You are not broken. You are infinite. You are the bridge between form and formless.",
            "You are the universe experiencing itself in human form.",
            "Separation is the grand illusion. You have never been apart from Source.",
            "Every breath is a conversation with infinity.",
            "Your pain is not punishment. It is the cocoon before transformation.",
            "Light does not fight darkness. It simply shines.",
            "You are not seeking enlightenment. You are remembering what you already are.",
            "The present moment is the only portal to eternity.",
            "Love is not an emotion. It is the fundamental frequency of existence.",
            "Your body is not a prison. It is a sacred instrument for experiencing the divine.",
            "Stillness is not the absence of movement. It is the presence of everything.",
            "You cannot fail at being yourself. It is the only thing you truly are.",
            "Forgiveness is not for the other. It is the key to your own freedom.",
            "The wound is where the light enters you.",
            "Gratitude turns what we have into enough.",
            "You are both the wave and the ocean.",
            "Surrender is not giving up. It is giving over to what already is.",
            "Every ending is a beginning wearing a disguise.",
            "Your consciousness is the universe becoming aware of itself.",
            "Peace is not found. It is uncovered by letting go of what blocks it.",
            "You are not a drop in the ocean. You are the entire ocean in a drop."
        ];

        // Set daily wisdom
        const today = new Date().getDate();
        document.getElementById('wisdom').textContent = wisdomMessages[today % wisdomMessages.length];

        // === STATE ===
        let audioCtx, osc, gain, timerInterval;
        let breathing = false, playing = false, startTime = null;
        let activeFreq = null;
        let breathPhase = 0;

        // === INIT AUDIO ===
        function initAudio() {
            if (!audioCtx) {
                audioCtx = new (window.AudioContext || window.webkitAudioContext)();
                gain = audioCtx.createGain();
                gain.gain.value = 0.08;
                gain.connect(audioCtx.destination);
            }
        }

        // === PLAY FREQUENCY ===
        function playFreq(freq) {
            initAudio();
            stopAll();
            
            if (freq === 0) {
                startTimer();
                return;
            }

            osc = audioCtx.createOscillator();
            osc.frequency.value = freq;
            osc.connect(gain);
            osc.start();
            playing = true;
            startTimer();
        }

        // === STOP ALL ===
        function stopAll() {
            if (osc) {
                osc.stop();
                osc.disconnect();
                osc = null;
            }
            playing = false;
            breathing = false;
            stopTimer();
            document.querySelectorAll('.freq-card').forEach(c => c.classList.remove('active'));
            document.getElementById('circleText').textContent = 'BREATHE';
            document.getElementById('circle').className = 'circle';
            activeFreq = null;
        }

        // === TIMER - FIXED ===
        function startTimer() {
            if (timerInterval) return;
            startTime = Date.now();
            document.getElementById('timer').classList.add('active');
            timerInterval = setInterval(() => {
                const elapsed = Math.floor((Date.now() - startTime) / 1000);
                const mins = Math.floor(elapsed / 60);
                const secs = elapsed % 60;
                document.getElementById('timer').textContent = 
                    `${String(mins).padStart(2, '0')}:${String(secs).padStart(2, '0')}`;
            }, 1000);
        }

        function stopTimer() {
            if (timerInterval) {
                clearInterval(timerInterval);
                timerInterval = null;
            }
            document.getElementById('timer').classList.remove('active');
            document.getElementById('timer').textContent = '00:00';
            startTime = null;
        }

        // === SMOOTH BREATHING ===
        function startBreathing() {
            breathing = !breathing;
            const circle = document.getElementById('circle');
            const text = document.getElementById('circleText');
            
            if (!breathing) {
                text.textContent = 'BREATHE';
                circle.className = 'circle';
                return;
            }

            const phases = [
                { text: 'INHALE', class: 'breathe-in' },
                { text: 'HOLD', class: 'hold-in' },
                { text: 'EXHALE', class: 'breathe-out' },
                { text: 'HOLD', class: 'hold-out' }
            ];
            
            breathPhase = 0;
            
            function cycle() {
                if (!breathing) return;
                
                const phase = phases[breathPhase];
                text.textContent = phase.text;
                circle.className = 'circle ' + phase.class;
                
                breathPhase = (breathPhase + 1) % phases.length;
                setTimeout(cycle, 4000);
            }
            
            cycle();
        }

        // === MODALS ===
        function openModal(id) {
            document.getElementById(id).classList.add('show');
        }

        function closeModal(id) {
            document.getElementById(id).classList.remove('show');
        }

        // === CANVAS PARTICLES ===
        const canvas = document.getElementById('cosmos');
        const ctx = canvas.getContext('2d');
        canvas.width = window.innerWidth;
        canvas.height = window.innerHeight;

        const particles = [];
        const particleCount = 100;

        class Particle {
            constructor() {
                this.reset();
                this.color = Math.random() > 0.5 ? 
                    `rgba(255, 20, 147, ${Math.random() * 0.5 + 0.2})` : 
                    `rgba(0, 191, 255, ${Math.random() * 0.5 + 0.2})`;
            }

            reset() {
                this.x = Math.random() * canvas.width;
                this.y = Math.random() * canvas.height;
                this.vx = (Math.random() - 0.5) * 0.3;
                this.vy = (Math.random() - 0.5) * 0.3;
                this.radius = Math.random() * 2 + 0.5;
            }

            update() {
                this.x += this.vx;
                this.y += this.vy;
                if (this.x < 0 || this.x > canvas.width) this.vx *= -1;
                if (this.y < 0 || this.y > canvas.height) this.vy *= -1;
            }

            draw() {
                ctx.beginPath();
                ctx.arc(this.x, this.y, this.radius, 0, Math.PI * 2);
                ctx.fillStyle = this.color;
                ctx.fill();
            }
        }

        for (let i = 0; i < particleCount; i++) {
            particles.push(new Particle());
        }

        function animate() {
            ctx.fillStyle = 'rgba(0, 0, 0, 0.05)';
            ctx.fillRect(0, 0, canvas.width, canvas.height);

            particles.forEach(particle => {
                particle.update();
                particle.draw();
            });

            for (let i = 0; i < particles.length; i++) {
                for (let j = i + 1; j < particles.length; j++) {
                    const dx = particles[i].x - particles[j].x;
                    const dy = particles[i].y - particles[j].y;
                    const distance = Math.sqrt(dx * dx + dy * dy);

                    if (distance < 100) {
                        ctx.beginPath();
                        const gradient = ctx.createLinearGradient(
                            particles[i].x, particles[i].y,
                            particles[j].x, particles[j].y
                        );
                        gradient.addColorStop(0, `rgba(255, 20, 147, ${0.1 * (1 - distance / 100)})`);
                        gradient.addColorStop(1, `rgba(0, 191, 255, ${0.1 * (1 - distance / 100)})`);
                        ctx.strokeStyle = gradient;
                        ctx.lineWidth = 0.5;
                        ctx.moveTo(particles[i].x, particles[i].y);
                        ctx.lineTo(particles[j].x, particles[j].y);
                        ctx.stroke();
                    }
                }
            }

            requestAnimationFrame(animate);
        }

        animate();

        window.addEventListener('resize', () => {
            canvas.width = window.innerWidth;
            canvas.height = window.innerHeight;
        });

        // === EVENT LISTENERS ===
        
        // Frequency Cards
        document.querySelectorAll('.freq-card').forEach(card => {
            card.addEventListener('click', function() {
                const freq = parseInt(this.dataset.freq);
                document.querySelectorAll('.freq-card').forEach(c => c.classList.remove('active'));
                this.classList.add('active');
                activeFreq = freq;
                playFreq(freq);
            });
        });

        // Breath Circle
        document.getElementById('circle').addEventListener('click', startBreathing);

        // Emergency Peace
        document.getElementById('peace').addEventListener('click', () => {
            playFreq(432);
            document.querySelector('.cosmos-glow').style.opacity = '0.8';
            setTimeout(() => {
                document.querySelector('.cosmos-glow').style.opacity = '0.3';
            }, 5000);
        });

        // Intention
        document.getElementById('intentionBtn').addEventListener('click', () => openModal('intentionModal'));
        document.getElementById('releaseBtn').addEventListener('click', () => {
            const text = document.getElementById('intentionText').value;
            if (text.trim()) {
                document.getElementById('intentionText').value = '';
                document.body.style.filter = 'brightness(1.5)';
                setTimeout(() => {
                    document.body.style.filter = 'brightness(1)';
                }, 2000);
            }
            closeModal('intentionModal');
        });

        // Share
        document.getElementById('shareBtn').addEventListener('click', () => {
            const canvas = document.getElementById('shareCanvas');
            const ctx = canvas.getContext('2d');
            
            const gradient = ctx.createLinearGradient(0, 0, canvas.width, canvas.height);
            gradient.addColorStop(0, '#1a0033');
            gradient.addColorStop(0.5, '#8a2be2');
            gradient.addColorStop(1, '#ff1493');
            ctx.fillStyle = gradient;
            ctx.fillRect(0, 0, canvas.width, canvas.height);
            
            ctx.fillStyle = 'white';
            ctx.font = 'bold 90px Inter';
            ctx.textAlign = 'center';
            ctx.fillText('INNERA FIELD', canvas.width / 2, canvas.height / 2 - 30);
            
            ctx.font = '45px Inter';
            ctx.fillText('You are infinite', canvas.width / 2, canvas.height / 2 + 60);
            
            const url = canvas.toDataURL('image/png');
            document.getElementById('preview').innerHTML = `<img src="${url}" alt="Share card">`;
            openModal('shareModal');
        });

        document.getElementById('downloadBtn').addEventListener('click', () => {
            const canvas = document.getElementById('shareCanvas');
            const link = document.createElement('a');
            link.download = 'innerafield.png';
            link.href = canvas.toDataURL();
            link.click();
        });

        // Stop
        document.getElementById('stopBtn').addEventListener('click', stopAll);

        // Accessibility - SIMPLIFIED
        document.getElementById('themeBtn').addEventListener('click', function() {
            document.body.classList.toggle('light');
            this.textContent = document.body.classList.contains('light') ? 'üåô Dark' : '‚òÄÔ∏è Light';
        });

        document.getElementById('textBtn').addEventListener('click', function() {
            const size = parseFloat(getComputedStyle(document.documentElement).fontSize);
            document.documentElement.style.fontSize = (size === 16 ? 20 : 16) + 'px';
            this.classList.toggle('active');
        });

        // Close modals
        document.addEventListener('keydown', e => {
            if (e.key === 'Escape') {
                closeModal('intentionModal');
                closeModal('shareModal');
            }
        });

        document.querySelectorAll('.modal').forEach(modal => {
            modal.addEventListener('click', e => {
                if (e.target === modal) closeModal(modal.id);
            });
        });
    </script>
</body>
</html>
